# Εφαρμογή Διαπίστευσης και Εγγραφής Ψηφοφόρων στην Κάλπη

Σκοπός της εφαρμογής  είναι η με ενιαίο τρόπο πρόσβαση από όλα τα ΕΤ  σε μια ΚΒΔ ώστε αφενός ο ψηφοφόρος να ψηφίζει όπου θέλει και να διαγράφεται ηλεκτρονικά από τον εκλογικό κατάλογο.

## 1.Γενική περιγραφή και εξυπηρετούμενες διαδικασίες

Πρόκειται για μια διαδικτυακή εφαρμογή(web) που θα δίνει πρόσβαση σε περιφερειακούς χρήστες από ταμπλέτες( tablets ) ή κινητά  προς την Κεντρική Βάση Δεδομένων (ΚΒΔ) εγκατεστημένη σε έναν εξυπηρετητή όπου υποδείξει η ΑΕΔΔ μετά από εισήγηση της Τεχνικής Επιτροπής (ΤΕ).

Η ΚΒΔ θα περιλαμβάνει  σύνολο πινάκων δομημένων  ανάλογα με τον τρόπο που θα δείξει η ανάλυση ώστε να διασφαλίζεται η συμπεφωνημένη διαδικασία.

Η εφαρμογή θα είναι σε θέση να αναζητά τον ψηφοφόρο  με τη λειτουργικότητα του ”μάθε που ψηφίζεις”
 
Η αναζήτηση θα γίνεται με τον ίδιο τρόπο από το χειριστή - μέλος ή εντεταλμένο της ΕΕ από ειδική οθόνη της εφαρμογής στην ταμπλέτα του που θα έχει αποκτήσει πρόσβαση μέσω της εφαρμογής διαχείρισης χρηστών. 

Εφόσον ο ψηφοφόρος που εμφανισθεί ενώπιον του χειριστή της Εφορευτικής Επιτροπής πληροί όλα τα σχετικά κριτήρια ο χειριστής “διαπιστεύει” τον ψηφοφόρο.

Η εγγραφή του ψηφίσαντος σημαίνεται από την εφαρμογή ως “ανενεργή” και δεν υπάρχει καμία δυνατότητα να ξαναψηφίσει.  Στο πλαίσιο της ίδιας διαδικασίας σημαίνεται η εγγραφή με το χρόνο που καταχωρήθηκε και με τον κωδικό του Εκλογικού Τμήματος.
 
Με τον ίδιο τρόπο θα σημαίνεται και η εγγραφή του ψηφοφόρου ο οποίος θα ψηφίζει εξ αποστάσεως με τη συσκευή του  με τρόπο που θα περιγραφεί στο Υποσύστημα  “Εξ αποστάσεως ψηφοφορία”
 
Θα υπάρχει δυνατότητα “ξεκλειδώματος”  της εγγραφής μόνο από ειδικό χρήστη που θα έχει οριστεί με ειδικά στοιχεία σύνδεσης (login) που θα ελέγχεται από την ΚΕΕ.  Το ξεκλείδωμα θα γίνεται κατ’ εντολήν της και μόνο στην περίπτωση που έχει πειστεί ότι η απενεργοποίηση έγινε από λάθος χειρισμό του χειριστή.
 
Η διαπίστευση των ταμπλετών (tablets) της κάθε ΕΕ ανά ΕΤ θα γίνεται με βάση τα στοιχεία του υπευθύνου του εκλογικού τμήματος από την εφαρμογή διαχείρισης χρηστών.
 
Η εφαρμογή θα είναι σε θέση να δίνει αριθμητικά στοιχεία σε πραγματικό χρόνο κατά τη διάρκεια της ψηφοφορίας και συγκεντρωτικά στο τέλος της ημέρας. Τα στοιχεία θα αφορούν τον αριθμό των ψηφισάντων ανά ET, δήμο κ.λ.π. σε συνδυασμό πιθανόν με την ώρα, το φύλο και λοιπές παραμέτρους που αντλούνται από τον EEK. Η εφαρμογή θα διαθέτει ανοιχτά δεδομένα ανα κάλπη. 


## 2. Λειτουργικότητα  της εφαρμογής
 
Σημειώνεται ότι το υποσύστημα αυτό θα “σηκώσει” όλο το βάρος της διαδικασίας και θα πρέπει να είναι σχεδιασμένο να αντέξει σε ώρες αιχμής.

### 2.1. Λειτουργικότητα απομακρυσμένου χρήστη (ταμπλέτα χειριστή ΕΤ)
#### 2.1.1. Βασική λειτουργικότητα - Ψηφοφορία 
1ο βήμα αναζήτηση ψηφοφόρου και διαπίστευση - Εισαγωγή εγγραφής
Σε μία οθόνη της μορφής που μπορεί κανείς να μελετήσει και εδώ http://www.ypes.gr/services/eea/eeagr/eea.htm
Ο χειριστής  αναζητά τον ψηφοφόρο, όλα τα πεδία καταχωρούνται μόνο με κεφαλαία. Η εφαρμογή μπορεί να απαντήσει είτε
Ότι δεν βρήκε τον ψηφοφόρο οπότε εμφανίζεται το μήνυμα “Δεν υπάρχει εγγραφή στον ΕΕΚ με αυτά τα στοιχεία”
Να φέρει όλα τα στοιχεία του ψηφοφόρου εφόσον είναι εγγεγραμμένος στον ΕΕΚ και να φέρει και τον ΕΕΑ. 

Στην περίπτωση αυτή  εκτελείται ακόμη ένας και μοναδικός έλεγχος: 
εάν η τιμή του πεδίου  [ΔΙΑΠΙΣΤΕΥΣΗ]  είναι ΝΑΙ. (Θα περιγραφεί κατωτέρω πως αλλάζει τιμές). Στην περίπτωση που η τιμή του πεδίου [ΔΙΑΠΙΣΤΕΥΣΗ]  είναι ΝΑΙ (σημαίνει ότι ο ψηφοφόρος έχει ψηφίσει ξανά)  εμφανίζεται το μήνυμα “Ο ψηφοφόρος δεν μπορεί να ψηφίσει”. Έτσι ο ψηφοφόρος αποκλείεται από την ψηφοφορία και παραπέμπεται στην αρμόδια EE.
Εάν η τιμή του πεδίου [ΔΙΑΠΙΣΤΕΥΣΗ Α ΓΥΡΟΣ] είναι ΟΧΙ ο χειριστής αλλάζει την τιμή σε ΝΑΙ και την ίδια στιγμή ενημερώνονται τα πεδία [ΠΛΗΡΩΜΗ] & [ΤΑΥΤΟΠΟΙΗΣΗ] 
Η εφαρμογή επιστρέφει έναν κωδικό(transaction code) που αποτελείται από τον κωδικό του ΕΤ που συντελείται η ψηφοφορία και με τον οποίον είναι διαπιστευμένη η ταμπλέτα και από τον αύξοντα αριθμό ψηφοφόρου.  O αριθμός αυτός αντιγράφεται από το χειριστή στην αίτηση του ψηφοφόρου.

Ενημερώνονται τα πεδία ΕΚΛΟΓΙΚΟ ΤΜΗΜΑ με τον κωδικό εκλογικού τμήματος που ψηφίζει ο εκλογέας και ΩΡΑ με την ώρα που γίνεται η διαπίστευση.

Πιθανή εξαίρεση : ιδιαίτερα για την πληρωμή ισχύουν εφόσον το ποσό που θα απαιτηθεί είναι συγκεκριμένο και ίδιο για όλους (fix). Εφόσον το ποσό αποφασισθεί να είναι κυμαινόμενο τότε το πεδίο [ΠΛΗΡΩΜΗ] θα συμπληρώνεται από το χειριστή τη στιγμή της διαπίστευσης με το ποσό που έχει εισπραχθεί.

Το 1ο βήμα αυτό είναι το κρισιμότερο σε όλη την εκλογική διαδικασία και η ταχύτητα εκτέλεσής του οφείλει να είναι μικρότερη από 30’ μέχρι τη στιγμή εμφάνισης του transaction code, συμπεριλαμβανομένης της πληκτρολόγησης των στοιχείων αναζήτησης από έναν έμπειρο χειριστή. 

Με ένα πλήκτρο η εφαρμογή επιστρέφει στην οθόνη αναζήτησης.

2ο βήμα Ενημέρωση δευτερευόντων στοιχείων - επεξεργασία εγγραφής
Κατά τη στιγμή της διαπίστευσης εμφανίζονται στο κάτω ήμισυ της οθόνης τα εξής πεδία 
[ΔΙΕΥΘΥΝΣΗ]
[ΠΟΛΗ] (από λεξικό πόλεων)
[ΤΚ]
[ΕΠΑΓΓΕΛΜΑ] (από λεξικό επαγγελμάτων)
[ΦΙΛΟΣ/ΜΕΛΟΣ] 
Τα οποία συμπληρώνονται από το χειριστή. 

Για διευκόλυνση της διαδικασίας τα στοιχεία αυτά θα μπορούν να ενημερώνουν ετεροχρονισμένα.  Αυτό επιβάλλει να υπάρχει η λειτουργία ΕΠΕΞΕΡΓΑΣΙΑ ΔΕΔΟΜΕΝΩΝ ΨΗΦΟΦΟΡΟΥ εκ των υστέρων. 

Η αναζήτηση θα γίνεται με το “transaction code”( θα είναι ο αριθμός της κάλπης και ο αύξων αριθμός του ψηφοφόρου “Α-κκκ-ααα” ) που θα έχει σημειωθεί σε κουτάκι πάνω δεξιά στην αίτηση  εγγραφής.
Θα εμφανίζεται η πλήρης καρτέλα του ψηφοφόρου και μετά την ενημέρωση από το χειριστή θα αποθηκεύεται με την επιλογή  ΑΠΟΘΗΚΕΥΣΗ.

Ο χειριστής θα μπορεί να επανέλθει στην εγγραφή ώστε να συμπληρώσει μόνο τα συμπληρωματικά στοιχεία Διεύθυνση κ.λ.π. όσες φορές το επιθυμεί  αλλά για κανένα λόγο δεν θα μπορεί να αλλάξει τις τιμές στα βασικά πεδία που καθορίζουν την πορεία της διαδικασίας.   
Αυτά θα αλλάζουν μόνον από χειριστή με ρόλο “Εφορευτική Επιτροπή” όπως θα περιγραφεί.

#### 2.1.2. Λειτουργικότητα δεύτερου γύρου  
Κατά τη διεξαγωγή του δεύτερου γύρου αναζητάται και ευρίσκεται ο ψηφοφόρος είτε με τη λειτουργικότητα του “μάθε που ψηφίζεις” είτε με το “transaction code”(Β-κκκ-ααα) του α’ Γύρου και ο μόνος έλεγχος που γίνεται είναι αν το πεδίο [ΔΙΑΠΙΣΤΕΥΣΗ] είναι ΝΑΙ που αποδεικνύει ότι ο ψηφοφόρος έχει ψηφίσει στο πρώτο γύρο.

Ο χειριστής διαπιστεύει τον ψηφοφόρο ενημερώνοντας το πεδίο [ΔΙΑΠΙΣΤΕΥΣΗ Β’ ΓΥΡΟΣ].

Το σύστημα παράγει πάλι ένα “transaction code”(Β-κκκ-ααα) β’ Γύρου που σημειώνεται στον κατάλογο ψηφισάντων χειρόγραφα.

#### 2.1.3. Διαπίστευση Ταμπλέτας - Χειριστή - Εφορευτικής Επιτροπής

Μόλις τίθεται σε λειτουργία η εφαρμογή θα απαιτεί σε ειδική οθόνη τα εξής στοιχεία :
[ΚΩΔΙΚΟ ΕΤ]
[ΟΝΟΜΑ ΧΡΗΣΤΗ ΧΕΙΡΙΣΤΗ]
[ΚΩΔΙΚΟΣ ΧΕΙΡΙΣΤΗ]
[ΟΝΟΜΑ ΧΡΗΣΤΗ ΕΕ]
[ΚΩΔΙΚΟΣ ΧΡΗΣΤΗ ΕΕ]

Και αφού τα στοιχεία συπληρωθούν σωστά, συγκρινόμενα με αυτά που θα υπάρχουν στη ΚΒΔ, τότε θα γίνεται η έναρξη λειτουργίας της εφαρμογής, τα στοιχεία αυτά θα προέρχονται από την εφαρμογή διαχείρισης χρηστών.

Στις 3 αποτυχημένες προσπάθειες, το σύστημα θα κλειδώνει και θα απαιτείται ειδικός κωδικός που θα χορηγείται από την ΚΕΕ. Στην περίπτωση αυτή θα χορηγούνται και καινούργιοι κωδικοί Χειριστή και Εφορευτικής Επιτροπής.

Για κάθε ταμπλέτα θα δύνανται να υπάρχουν περισσότεροι του ενός χειριστές και περισσότερα του ενός μέλη της ΕΕ. 
Κάθε μέλος που θα διαπιστεύεται αρχικά θα πρέπει να μπορεί να δηλώσει ότι “αποχωρεί” από τη διαδικασία και στη θέση του να διαπιστευθεί άλλο με τους δικούς του κωδικούς από την εφαρμογή διαχείρισης χρηστών.

#### 2.1.3. Κλείσιμο διαδικασίας 
Με το πέρας της εκλογής  έρχεται μήνυμα από την ΚΒΔ.  Στην περίπτωση ανάγκης παράτασης της διαδικασίας, το μέλος της ΕΕ δηλώνει σε ειδική οθόνη τον εκτιμώμενο χρόνο παράτασης. 
Εφόσον δεν υπάρχει θέμα παράτασης ή αυτή έχει εκπνεύσει 
Ο χειριστής και το μέλος της ΕΕ δηλώνουν στην ειδική οθόνη κλεισίματος διαδοχικά το πέρας της διαδικασίας.

Ακολούθως, συνδέονται με την εφαρμογή αποτελεσμάτων με ειδική διαδικασία. 
Εισάγουν το αποτέλεσμα της καταμέτρησης
Φωτογραφίζουν και αποστέλλουν το πρωτόκολλο της καταμέτρησης

Τέλος, και ο χειριστής και το μέλος της ΕΕ δηλώνουν το οριστικό πέρας της όλης διαδικασίας.

Επισημαίνεται ότι η εκλογή πιθανότατα να διενεργηθεί σε δύο γύρους.  Κατά τον επαναληπτικό γύρο, εφόσον απαιτηθεί, η διαδικασία θα είναι ακριβώς ή ίδια.

### 2.2. Σχεδιασμός και λειτουργικότητα ΚΒΔ
#### 2.2.1.   Θα περιγραφεί αναλυτικά μετά το πέρας της ανάλυσης

#### 2.2.2. Λειτουργικότητα  παρελκόμενη από την εξ αποστάσεως ψηφοφορία
Παρότι η λειτουργικότητα της εφαρμογής για την εξ αποστάσεως ταυτοποίηση και διαπίστευση περιγράφονται σε ιδιαίτερο Παράρτημα σημειώνεται εδώ η επίδραση στην Κεντρική Βάση Διαπίστευσης.
Η εφαρμογή “Εξ αποστάσεως” λειτουργεί με πανομοιότυπο  τρόπο με την εφαρμογή “Διαπίστευσης” με τις εξής διαφορές:
Μεταξύ της αναζήτησης και εύρεσης του ψηφοφόρου και της διαπίστευσης μεσολαβούν οι εξής πιστοποιήσεις που ενημερώνονται  στην ΚΒΔ στα αντίστοιχα πεδία:
[ΠΛΗΡΩΜΗ] 
[ΤΑΥΤΟΠΟΙΗΣΗ]

Από τα αντίστοιχα συστήματα που αναλαμβάνουν τις διαδικασίες αυτές.  
Η απάντηση από τη διαδικασία της πληρωμής μέσω κάρτας / paypal κ.λ.π. Προκαλεί την ενημέρωση του πεδίου [ΠΛΗΡΩΜΗ] και 
Η τελική απάντηση από την διαδοχική αλληλουχία απαιτούμενων ταυτοποιήσεων προκαλεί την ενημέρωση του πεδίου ταυτοποίηση.  
Εφόσον και τα δύο αυτά πεδία είναι ενημερωμένα με την τιμή ΝΑΙ τότε και μόνον τότε ο ψηφοφόρος παίρνει την “άδεια” να ψηφίσει. Τη διαδικασία αναλαμβάνει το ZEUS, Με λεπτομέρειες που θα καθοριστούν από την ανάλυση το σύστημα ενημερώνει τη ΚΒΔ στο πεδίο [ΔΙΑΠΙΣΤΕΥΣΗ] με την τιμή ΝΑΙ οπότε ο ψηφοφόρος αποκλείεται από οποιαδήποτε άλλη συμμετοχή του σε ψηφοφορία φυσικής ή ψηφιακής κάλπης.  Η εφαρμογή παράγει το ίδιο  transaction code για τον εξ αποστάσεως ψηφοφόρο (όπως και για τη “διά ζώσης” ψηφοφορία), το οποίο αποτελεί γι’ αυτόν το αποδεικτικό ψήφου.

#### 2.2.3. Δομή κυρίων και παραμετρικών πινάκων
Παραδίδονται τα κατωτέρω και τα υπολειπόμενα όπως Επαγγέλματα, ΕΤ, κ.λ.π. Δομή, κατάλογοι και λεξικά θα παραδοθούν κατά την ανάλυση.
#####  2.2.3.1. ΕΕΚ
ΑΡΧΕΙΟ ΕΛΛΗΝΩΝ ΕΚΛΟΓΕΩΝ (total)

##### 2.2.3.2. Δήμοι 
ΑΡΧΕΙΟ ΔΗΜΩΝ (dhmoi)
 
##### 2.2.3.3. Δημοτικές ενότητες
ΑΡΧΕΙΟ ΔΗΜΟΤΙΚΩΝ ΕΝΟΤΗΤΩΝ (dhmot_enot)

##### 2.2.3.4. Διαμερίσματα
ΑΡΧΕΙΟ ΔΙΑΜΕΡΙΣΜΑΤΩΝ (diam)
 
## 3. Αναζητήσεις και αναφορές 
### 3.1. Αναζητήσεις  
Η εφαρμογή θα είναι σε θέση να αναζητά  οποιαδήποτε εγγραφή ή ομάδα εγγραφών  με οιαδήποτε υπαρκτά  κριτήρια, σε μορφή απλού καταλόγου  ή σε αρχείο spreadsheet, για τους διαχειριστές της ΚΒΣ.

Η εφαρμογή από τη λειτουργικότητα του απομακρυσμένου χρήστη θα είναι σε θέση να δώσει τις απαντήσεις - μηνύματα σε ειδική οθόνη αναζήτησης που θα υπάρχει:
Έχει ψηφίσει στο Εκλογικό Τμήμα … , … ώρα
Δεν έχει ψηφίσει στον α’ γύρο κ.λ.π. που θα συμφωνηθούν στη φάση της ανάλυσης εφόσον ισχύουν οι σχετικές συνθήκες.

### 3.2. Ειδικές αναφορές
Η εφαρμογή στο κάτω μέρος της οθόνης θα αναγράφει τον αριθμό ψηφισάντων στην κάλπη και το σύνολο των εσόδων.
Με το κλείσιμο της κάλπης θα εμφανίζεται η επιλογή “Καταχώρηση Πρακτικού και Αποτελεσμάτων” όπου θα καταχωρούνται τα αποτελέσματα από το πρακτικό και θα φωτογραφίζεται, στην καταχώριση θα περιλαμβάνεται και ο αριθμός ψηφισάντων στην κάλπη και το σύνολο των εσόδων από την εφαρμογή.
Επιπλέον αναφορές θα συμφωνηθούν με την Κεντρική Εφορευτική Επιτροπή.

## 4. Ρόλοι και δικαιώματα 
Σε επίπεδο ΚΔΒ ο διαχειριστής θα μπορεί να αλλάξει οποιαδήποτε τιμή πλην των 
[ΕΕΑ]
[ΚΩΔΙΚΟΣ ΕΤ] ψηφίσαντος
Timestamp
Για τις αλλαγές είναι αυτονόητο ότι θα τηρείται σχετικό αρχείο.

Ο ρόλος χειριστής ταμπλέτας θα μπορεί να εκτελεί όσα αναφέρονται στη βασική λειτουργικότητα. Οι μόνες αλλαγές που θα μπορεί να κάνει θα είναι σε επίπεδο εφαρμογής  και συγκεκριμένα η ΕΠΕΞΕΡΓΑΣΙΑ ΕΓΓΡΑΦΗΣ για αλλαγές στη διεύθυνση κ.λ.π.

## 5. Υποδομές, αρχιτεκτονική και απαιτούμενες επιδόσεις.
### 5.1. Υπολογιστική Υποδομή 
Google Cloud Service
### 5.2. Διασυνδεσιμότητα
Η εφαρμογή σε επίπεδο ΚΒΔ πρέπει να είναι διασυνδεδεμένη με τις εφαρμογές “ΤΑΥΤΟΠΟΙΗΣΗ” και “ΨΗΦΙΑΚΗ ΚΑΛΠΗ” με τρόπους που θα δείξει η ανάλυση.
### 5.3. Απαιτούμενες επιδόσεις 
Αποδεκτός χρόνος αναζήτησης μαζί με την πληκτρολόγηση < 24’’ με πληκτρολόγηση από έμπειρο χρήστη.
Αποδεκτός χρόνος επιστροφής της εγγραφής <0,5’’
Αποδεκτός χρόνος ολοκλήρωσης της διαδικασίας <30’’
